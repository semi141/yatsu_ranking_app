<h1><%= @video.title %></h1>
<p>URL: <%= @video.url.presence || "未登録" %></p>
<p>カテゴリ: <%= @video.category.presence || "未登録" %></p>

<h3>コメント一覧</h3>
<% valid_posts = @video.posts.select { |post| post.content.present? } %>
<% if valid_posts.any? %>
  <% valid_posts.each do |post| %>
    <div>
      <p><%= post.content %></p>
      <p>投稿者: <%= post.user&.name %></p>

      <% if current_user == post.user %>
        <%= link_to "編集", edit_post_path(post), class: "btn btn-primary" %> |
        <%= button_to "削除", post_path(post), method: :delete, data: { confirm: "本当に削除しますか？" }, class: "btn btn-danger" %>
      <% end %>
    </div>
  <% end %>
<% else %>
  <p>まだコメントはありません</p>
<% end %>

<%= link_to "新規コメント", new_video_post_path(@video) %>
